(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[636],{2554:(e,t,r)=>{Promise.resolve().then(r.bind(r,7477))},7477:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var a=r(5155),l=r(2115),s=r(1731),i=r(6046),n=r(1020),o=r(3394);let c=(0,o.A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var d=r(1466);let u=(0,o.A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]),x=(0,o.A)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),h=(0,o.A)("calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),b=(0,o.A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),m=[{value:1.2,label:"Sedentario",desc:"Poco o nessun esercizio"},{value:1.375,label:"Leggero",desc:"Esercizio 1-3 giorni/settimana"},{value:1.55,label:"Moderato",desc:"Esercizio 3-5 giorni/settimana"},{value:1.725,label:"Attivo",desc:"Esercizio 6-7 giorni/settimana"},{value:1.9,label:"Molto Attivo",desc:"Atleta / lavoro fisico intenso"}],f=[{value:-500,label:"Dimagrire",desc:"-500 kcal/giorno (-0.5kg/sett.)"},{value:0,label:"Mantenere",desc:"Peso stabile"},{value:300,label:"Aumentare",desc:"+300 kcal/giorno (massa)"}];function p(){var e;let t=(0,s.A)(),r=(0,i.useRouter)(),o=null==t?void 0:t.user,p=null===(e=null==t?void 0:t.loading)||void 0===e||e,[g,v]=(0,l.useState)(!0),[y,j]=(0,l.useState)(!1),[w,k]=(0,l.useState)(""),[N,M]=(0,l.useState)(""),[C,A]=(0,l.useState)(""),[S,D]=(0,l.useState)("male"),[_,z]=(0,l.useState)(1.55),[E,U]=(0,l.useState)(0);(0,l.useEffect)(()=>{p||o||r.push("/login")},[o,p,r]),(0,l.useEffect)(()=>{o&&P()},[o]);let P=async()=>{try{let e=await (0,n.getUserProfile)();e&&(k(e.weight||""),M(e.height||""),A(e.age||""),D(e.sex||"male"),z(e.activityLevel||1.55),U(e.goal||0))}catch(e){console.error("Error loading profile:",e)}finally{v(!1)}},I=async()=>{j(!0);try{await (0,n.saveUserProfile)({weight:parseFloat(w),height:parseFloat(N),age:parseInt(C),sex:S,activityLevel:_,goal:E,tdee:L(),targetCalories:F()}),r.push("/")}catch(e){alert("Errore nel salvataggio: "+e.message)}finally{j(!1)}},H=()=>{let e=parseFloat(w),t=parseFloat(N),r=parseInt(C);return e&&t&&r?"male"===S?10*e+6.25*t-5*r+5:10*e+6.25*t-5*r-161:0},L=()=>Math.round(H()*_),F=()=>L()+E;if(p||g||!o)return(0,a.jsx)("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})});let R=L(),O=F(),W=(()=>{let e=F(),t=Math.round(2*(parseFloat(w)||70)),r=Math.round(.25*e/9),a=Math.round((e-4*t-9*r)/4);return{protein:t,carbs:a,fat:r}})(),B=w&&N&&C;return(0,a.jsxs)("div",{className:"min-h-screen pb-8 px-4 pt-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,a.jsx)("button",{onClick:()=>r.push("/"),className:"h-10 w-10 glass-panel rounded-full flex items-center justify-center text-gray-400 hover:text-white transition",children:(0,a.jsx)(c,{size:20})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Il Mio Profilo"})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("section",{className:"glass-panel p-5 rounded-2xl",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(d.A,{size:20,className:"text-blue-400"}),"Dati Personali"]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-400 mb-1 block",children:"Peso (kg)"}),(0,a.jsx)("input",{type:"number",value:w,onChange:e=>k(e.target.value),placeholder:"70",className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:border-blue-500 focus:outline-none"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-400 mb-1 block",children:"Altezza (cm)"}),(0,a.jsx)("input",{type:"number",value:N,onChange:e=>M(e.target.value),placeholder:"175",className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:border-blue-500 focus:outline-none"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-400 mb-1 block",children:"Et\xe0"}),(0,a.jsx)("input",{type:"number",value:C,onChange:e=>A(e.target.value),placeholder:"30",className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:border-blue-500 focus:outline-none"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm text-gray-400 mb-1 block",children:"Sesso"}),(0,a.jsxs)("select",{value:S,onChange:e=>D(e.target.value),className:"w-full bg-slate-800 border border-slate-700 rounded-xl px-4 py-3 text-white focus:border-blue-500 focus:outline-none",children:[(0,a.jsx)("option",{value:"male",children:"Uomo"}),(0,a.jsx)("option",{value:"female",children:"Donna"})]})]})]})]}),(0,a.jsxs)("section",{className:"glass-panel p-5 rounded-2xl",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(u,{size:20,className:"text-emerald-400"}),"Livello Attivit\xe0"]}),(0,a.jsx)("div",{className:"space-y-2",children:m.map(e=>{let t=_===e.value;return(0,a.jsx)("button",{onClick:()=>z(e.value),className:"w-full text-left p-4 rounded-xl border-2 transition",style:{backgroundColor:t?"rgba(16, 185, 129, 0.4)":"rgba(30, 41, 59, 0.5)",borderColor:t?"#34d399":"#334155",boxShadow:t?"0 10px 25px rgba(16, 185, 129, 0.3)":"none"},children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{style:{color:t?"#6ee7b7":"#ffffff",fontWeight:600},children:e.label}),(0,a.jsx)("div",{className:"text-sm text-gray-400",children:e.desc})]}),t&&(0,a.jsx)("div",{style:{width:28,height:28,backgroundColor:"#10b981",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})})]})},e.value)})})]}),(0,a.jsxs)("section",{className:"glass-panel p-5 rounded-2xl",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(x,{size:20,className:"text-amber-400"}),"Obiettivo"]}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:f.map(e=>{let t=E===e.value;return(0,a.jsxs)("button",{onClick:()=>U(e.value),className:"p-4 rounded-xl border-2 transition text-center",style:{backgroundColor:t?"rgba(245, 158, 11, 0.4)":"rgba(30, 41, 59, 0.5)",borderColor:t?"#fbbf24":"#334155",boxShadow:t?"0 10px 25px rgba(245, 158, 11, 0.3)":"none"},children:[(0,a.jsx)("div",{style:{color:t?"#fcd34d":"#ffffff",fontWeight:600,fontSize:"0.875rem"},children:e.label}),t&&(0,a.jsx)("div",{style:{color:"#fbbf24",fontSize:"0.75rem",marginTop:"0.25rem"},children:"✓"})]},e.value)})})]}),B&&(0,a.jsxs)("section",{className:"glass-panel p-5 rounded-2xl bg-gradient-to-br from-blue-500/10 to-purple-500/10",children:[(0,a.jsxs)("h2",{className:"text-lg font-semibold text-white mb-4 flex items-center gap-2",children:[(0,a.jsx)(h,{size:20,className:"text-blue-400"}),"Il Tuo Fabbisogno"]}),(0,a.jsxs)("div",{className:"text-center mb-4",children:[(0,a.jsx)("div",{className:"text-5xl font-black text-white",children:O}),(0,a.jsx)("div",{className:"text-gray-400",children:"kcal / giorno"})]}),(0,a.jsxs)("div",{className:"flex justify-around text-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-blue-400",children:[W.protein,"g"]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Proteine"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-emerald-400",children:[W.carbs,"g"]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Carboidrati"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold text-amber-400",children:[W.fat,"g"]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:"Grassi"})]})]}),(0,a.jsxs)("div",{className:"mt-4 text-xs text-gray-500 text-center",children:["TDEE base: ",R," kcal • Obiettivo: ",E>0?"+":"",E," kcal"]})]}),(0,a.jsx)("button",{onClick:I,disabled:!B||y,className:"w-full h-14 bg-gradient-to-r from-blue-500 to-purple-500 text-white font-bold rounded-2xl flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed hover:opacity-90 transition active:scale-95",children:y?(0,a.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-t-2 border-b-2 border-white"}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b,{size:20}),"Salva Profilo"]})})]})]})}},1731:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,AuthContextProvider:()=>o});var a=r(5155),l=r(2115),s=r(5877),i=r(4674);let n=(0,l.createContext)(),o=e=>{let{children:t}=e,[r,o]=(0,l.useState)(null),[c,d]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{let e=(0,s.hg)(i.j2,e=>{o(e),d(!1)});return()=>e()},[]),(0,a.jsx)(n.Provider,{value:{user:r,googleSignIn:()=>{let e=new s.HF;(0,s.df)(i.j2,e)},logOut:()=>{(0,s.CI)(i.j2)},loading:c},children:t})},c=()=>(0,l.useContext)(n)},4674:(e,t,r)=>{"use strict";r.d(t,{db:()=>o,j2:()=>c});var a=r(9904),l=r(3935),s=r(6802),i=r(5877);let n=(0,a.Dk)().length?(0,a.Sx)():(0,a.Wp)({apiKey:"AIzaSyC4IeM4fq3BcX_LwOg1mEpYMPV9p8nRVA4",authDomain:"sentieri-cortina-web-app.firebaseapp.com",projectId:"sentieri-cortina-web-app",storageBucket:"sentieri-cortina-web-app.firebasestorage.app",messagingSenderId:"191250415086",appId:"1:191250415086:web:7554dc94148f690538a2ff"}),o=(0,l.aU)(n);(0,s.c7)(n);let c=(0,i.xI)(n)},1020:(e,t,r)=>{"use strict";r.r(t),r.d(t,{addMeal:()=>o,deleteMeal:()=>c,getMeals:()=>n,getUserProfile:()=>u,saveUserProfile:()=>x,updateMeal:()=>d});var a=r(4674),l=r(3935);let s="meals",i="profiles";async function n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!a.j2.currentUser)return[];let t=e||new Date,r=new Date(t);r.setHours(0,0,0,0);let i=new Date(t);i.setHours(23,59,59,999);let n=(0,l.P)((0,l.rJ)(a.db,s),(0,l._M)("userId","==",a.j2.currentUser.uid),(0,l._M)("created_at",">=",l.Dc.fromDate(r)),(0,l._M)("created_at","<=",l.Dc.fromDate(i)),(0,l.My)("created_at","desc"));return(await (0,l.GG)(n)).docs.map(e=>{var t,r;let a=e.data();return{id:e.id,...a,created_at:(null===(r=a.created_at)||void 0===r?void 0:null===(t=r.toDate)||void 0===t?void 0:t.call(r))||new Date(a.created_at)}}).reverse()}async function o(e){if(!a.j2.currentUser)throw Error("User not authenticated");let t=e.created_at?l.Dc.fromDate(new Date(e.created_at)):l.Dc.now();return{id:(await (0,l.gS)((0,l.rJ)(a.db,s),{...e,userId:a.j2.currentUser.uid,created_at:t})).id,...e,created_at:t.toDate()}}async function c(e){await (0,l.kd)((0,l.H9)(a.db,s,e))}async function d(e,t){let r=(0,l.H9)(a.db,s,e);await (0,l.mZ)(r,t)}async function u(){if(!a.j2.currentUser)return null;let e=(0,l.H9)(a.db,i,a.j2.currentUser.uid),t=await (0,l.x7)(e);return t.exists()?t.data():null}async function x(e){if(!a.j2.currentUser)throw Error("User not authenticated");let t=(0,l.H9)(a.db,i,a.j2.currentUser.uid);return await (0,l.BN)(t,{...e,updatedAt:l.Dc.now()}),e}},3394:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var a=r(2115);let l=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim()},s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()),n=e=>{let t=i(e);return t.charAt(0).toUpperCase()+t.slice(1)};var o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1},d=(0,a.forwardRef)((e,t)=>{let{color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:n,className:d="",children:u,iconNode:x,...h}=e;return(0,a.createElement)("svg",{ref:t,...o,width:s,height:s,stroke:r,strokeWidth:n?24*Number(i)/Number(s):i,className:l("lucide",d),...!u&&!c(h)&&{"aria-hidden":"true"},...h},[...x.map(e=>{let[t,r]=e;return(0,a.createElement)(t,r)}),...Array.isArray(u)?u:[u]])}),u=(e,t)=>{let r=(0,a.forwardRef)((r,i)=>{let{className:o,...c}=r;return(0,a.createElement)(d,{ref:i,iconNode:t,className:l("lucide-".concat(s(n(e))),"lucide-".concat(e),o),...c})});return r.displayName=n(e),r}},1466:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(3394).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},6046:(e,t,r)=>{"use strict";var a=r(6658);r.o(a,"useRouter")&&r.d(t,{useRouter:function(){return a.useRouter}})}},e=>{var t=t=>e(e.s=t);e.O(0,[399,563,215,441,517,358],()=>t(2554)),_N_E=e.O()}]);