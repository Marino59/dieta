"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[390],{8129:(t,e,n)=>{n.d(e,{TF:()=>tg}),function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"}(o||(o={}));var o,r,i,a,s,c,u=new Map([[o.QR_CODE,"QR_CODE"],[o.AZTEC,"AZTEC"],[o.CODABAR,"CODABAR"],[o.CODE_39,"CODE_39"],[o.CODE_93,"CODE_93"],[o.CODE_128,"CODE_128"],[o.DATA_MATRIX,"DATA_MATRIX"],[o.MAXICODE,"MAXICODE"],[o.ITF,"ITF"],[o.EAN_13,"EAN_13"],[o.EAN_8,"EAN_8"],[o.PDF_417,"PDF_417"],[o.RSS_14,"RSS_14"],[o.RSS_EXPANDED,"RSS_EXPANDED"],[o.UPC_A,"UPC_A"],[o.UPC_E,"UPC_E"],[o.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]);!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"}(r||(r={})),function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"}(i||(i={}));var l=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[i.SCAN_TYPE_CAMERA,i.SCAN_TYPE_FILE],t}(),d=function(){function t(t,e){this.format=t,this.formatName=e}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!u.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,u.get(e))},t}(),h=function(){function t(){}return t.createFromText=function(t){return{decodedText:t,result:{text:t}}},t.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},t}();!function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"}(a||(a={}));var p=function(){function t(){}return t.createFrom=function(t){return{errorMessage:t,type:a.UNKWOWN_ERROR}},t}(),f=function(){function t(t){this.verbose=t}return t.prototype.log=function(t){this.verbose&&console.log(t)},t.prototype.warn=function(t){this.verbose&&console.warn(t)},t.prototype.logError=function(t,e){(this.verbose||!0===e)&&console.error(t)},t.prototype.logErrors=function(t){if(0===t.length)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},t}();function g(t){return null==t}var y=function(){function t(){}return t.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},t.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),m=function(){function t(){}return t.scanningStatus=function(){return"Scanning"},t.idleStatus=function(){return"Idle"},t.errorStatus=function(){return"Error"},t.permissionStatus=function(){return"Permission"},t.noCameraFoundErrorStatus=function(){return"No Cameras"},t.lastMatch=function(t){return"Last Match: ".concat(t)},t.codeScannerTitle=function(){return"Code Scanner"},t.cameraPermissionTitle=function(){return"Request Camera Permissions"},t.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},t.noCameraFound=function(){return"No camera found"},t.scanButtonStopScanningText=function(){return"Stop Scanning"},t.scanButtonStartScanningText=function(){return"Start Scanning"},t.torchOnButton=function(){return"Switch On Torch"},t.torchOffButton=function(){return"Switch Off Torch"},t.torchOnFailedMessage=function(){return"Failed to turn on torch"},t.torchOffFailedMessage=function(){return"Failed to turn off torch"},t.scanButtonScanningStarting=function(){return"Launching Camera..."},t.textIfCameraScanSelected=function(){return"Scan an Image File"},t.textIfFileScanSelected=function(){return"Scan using camera directly"},t.selectCamera=function(){return"Select Camera"},t.fileSelectionChooseImage=function(){return"Choose Image"},t.fileSelectionChooseAnother=function(){return"Choose Another"},t.fileSelectionNoImageSelected=function(){return"No image choosen"},t.anonymousCameraPrefix=function(){return"Anonymous Camera"},t.dragAndDropMessage=function(){return"Or drop an image to scan"},t.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},t.zoom=function(){return"zoom"},t.loadingImage=function(){return"Loading image..."},t.cameraScanAltText=function(){return"Camera based scan"},t.fileScanAltText=function(){return"Fule based scan"},t}(),S=function(){function t(){}return t.poweredBy=function(){return"Powered by "},t.reportIssues=function(){return"Report issues"},t}(),C=function(){function t(){}return t.isMediaStreamConstraintsValid=function(t,e){if("object"!=typeof t){var n=typeof t;return e.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(n,"."),!0),!1}for(var o=new Set(["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"]),r=Object.keys(t),i=0;i<r.length;i++){var a=r[i];if(o.has(a))return e.logError("".concat(a," is not supported videoConstaints."),!0),!1}return!0},t}(),T=n(2337),E=function(){function t(t,e,n){if(this.formatMap=new Map([[o.QR_CODE,T.BarcodeFormat.QR_CODE],[o.AZTEC,T.BarcodeFormat.AZTEC],[o.CODABAR,T.BarcodeFormat.CODABAR],[o.CODE_39,T.BarcodeFormat.CODE_39],[o.CODE_93,T.BarcodeFormat.CODE_93],[o.CODE_128,T.BarcodeFormat.CODE_128],[o.DATA_MATRIX,T.BarcodeFormat.DATA_MATRIX],[o.MAXICODE,T.BarcodeFormat.MAXICODE],[o.ITF,T.BarcodeFormat.ITF],[o.EAN_13,T.BarcodeFormat.EAN_13],[o.EAN_8,T.BarcodeFormat.EAN_8],[o.PDF_417,T.BarcodeFormat.PDF_417],[o.RSS_14,T.BarcodeFormat.RSS_14],[o.RSS_EXPANDED,T.BarcodeFormat.RSS_EXPANDED],[o.UPC_A,T.BarcodeFormat.UPC_A],[o.UPC_E,T.BarcodeFormat.UPC_E],[o.UPC_EAN_EXTENSION,T.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!T)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=e,this.logger=n;var r=this.createZXingFormats(t),i=new Map;i.set(T.DecodeHintType.POSSIBLE_FORMATS,r),i.set(T.DecodeHintType.TRY_HARDER,!1),this.hints=i}return t.prototype.decodeAsync=function(t){var e=this;return new Promise(function(n,o){try{n(e.decode(t))}catch(t){o(t)}})},t.prototype.decode=function(t){var e=new T.MultiFormatReader(this.verbose,this.hints),n=new T.HTMLCanvasElementLuminanceSource(t),o=new T.BinaryBitmap(new T.HybridBinarizer(n)),r=e.decode(o);return{text:r.text,format:d.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(e,n,o){t.set(e,n)}),t},t.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},t.prototype.createZXingFormats=function(t){for(var e=[],n=0;n<t.length;n++){var o=t[n];this.formatMap.has(o)?e.push(this.formatMap.get(o)):this.logger.logError("".concat(o," is not supported by")+"ZXingHtml5QrcodeShim")}return e},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),M=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},A=function(){function t(e,n,r){if(this.formatMap=new Map([[o.QR_CODE,"qr_code"],[o.AZTEC,"aztec"],[o.CODABAR,"codabar"],[o.CODE_39,"code_39"],[o.CODE_93,"code_93"],[o.CODE_128,"code_128"],[o.DATA_MATRIX,"data_matrix"],[o.ITF,"itf"],[o.EAN_13,"ean_13"],[o.EAN_8,"ean_8"],[o.PDF_417,"pdf417"],[o.UPC_A,"upc_a"],[o.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var i=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(i),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){return"BarcodeDetector"in window&&(new BarcodeDetector({formats:["qr_code"]}),!0)},t.prototype.decodeAsync=function(t){var e,n,o,r;return e=this,n=void 0,o=void 0,r=function(){var e,n;return M(this,function(o){switch(o.label){case 0:return[4,this.detector.detect(t)];case 1:if(!(e=o.sent())||0===e.length)throw"No barcode or QR code detected.";return[2,{text:(n=this.selectLargestBarcode(e)).rawValue,format:d.create(this.toHtml5QrcodeSupportedFormats(n.format)),debugData:this.createDebugData()}]}})},new(o||(o=Promise))(function(t,i){function a(t){try{c(r.next(t))}catch(t){i(t)}}function s(t){try{c(r.throw(t))}catch(t){i(t)}}function c(e){var n;e.done?t(e.value):((n=e.value)instanceof o?n:new o(function(t){t(n)})).then(a,s)}c((r=r.apply(e,n||[])).next())})},t.prototype.selectLargestBarcode=function(t){for(var e=null,n=0,o=0;o<t.length;o++){var r=t[o],i=r.boundingBox.width*r.boundingBox.height;i>n&&(n=i,e=r)}if(!e)throw"No largest barcode found";return e},t.prototype.createBarcodeDetectorFormats=function(t){for(var e=[],n=0;n<t.length;n++){var o=t[n];this.formatMap.has(o)?e.push(this.formatMap.get(o)):this.logger.warn("".concat(o," is not supported by")+"BarcodeDetectorDelegate")}return{formats:e}},t.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},t.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(e,n,o){t.set(e,n)}),t},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),I=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},v=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},N=function(){function t(t,e,n,o){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=n,e&&A.isSupported()?(this.primaryDecoder=new A(t,n,o),this.secondaryDecoder=new E(t,n,o)):this.primaryDecoder=new E(t,n,o)}return t.prototype.decodeAsync=function(t){return I(this,void 0,void 0,function(){var e;return v(this,function(n){switch(n.label){case 0:e=performance.now(),n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,n.sent()];case 3:return this.possiblyLogPerformance(e),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(t){return I(this,void 0,void 0,function(){var e,n;return v(this,function(o){switch(o.label){case 0:e=performance.now(),o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,o.sent()];case 3:if(n=o.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw n;case 4:return this.possiblyLogPerformance(e),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?!1===this.wasPrimaryDecoderUsedInLastDecode?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(t){if(this.verbose){var e=performance.now()-t;this.executionResults.push(e),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,e=0,n=this.executionResults;e<n.length;e++)t+=n[e];var o=t/this.executionResults.length;console.log("".concat(o," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),D=function(){var t=function(e,n){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),w=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},b=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},O=function(){function t(t,e){this.name=t,this.track=e}return t.prototype.isSupported=function(){return!!this.track.getCapabilities&&this.name in this.track.getCapabilities()},t.prototype.apply=function(t){var e={};return e[this.name]=t,this.track.applyConstraints({advanced:[e]})},t.prototype.value=function(){var t=this.track.getSettings();return this.name in t?t[this.name]:null},t}(),_=function(t){function e(e){return t.call(this,"zoom",e)||this}return D(e,t),e}(function(t){function e(e,n){return t.call(this,e,n)||this}return D(e,t),e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(t){var e={};return e[this.name]=t,this.track.applyConstraints({advanced:[e]})},e.prototype.getCapabilities=function(){this.failIfNotSupported();var t=this.track.getCapabilities()[this.name];return{min:t.min,max:t.max,step:t.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw Error("".concat(this.name," capability not supported"))},e}(O)),L=function(t){function e(e){return t.call(this,"torch",e)||this}return D(e,t),e}(O),x=function(){function t(t){this.track=t}return t.prototype.zoomFeature=function(){return new _(this.track)},t.prototype.torchFeature=function(){return new L(this.track)},t}(),R=function(){function t(t,e,n){this.isClosed=!1,this.parentElement=t,this.mediaStream=e,this.callbacks=n,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return t.prototype.createVideoElement=function(t){var e=document.createElement("video");return e.style.width="".concat(t,"px"),e.style.display="block",e.muted=!0,e.setAttribute("muted","true"),e.playsInline=!0,e},t.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var e=function(){var n=t.surface.clientWidth,o=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(n,o),t.surface.removeEventListener("playing",e)};this.surface.addEventListener("playing",e),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,o,r){return w(this,void 0,void 0,function(){var i,a;return b(this,function(s){switch(s.label){case 0:if(i=new t(e,n,r),!o.aspectRatio)return[3,2];return a={aspectRatio:o.aspectRatio},[4,i.getFirstTrackOrFail().applyConstraints(a)];case 1:s.sent(),s.label=2;case 2:return i.setupSurface(),[2,i]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),0===this.mediaStream.getVideoTracks().length)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(t){this.failIfClosed();var e=this,n=function(){setTimeout(t,200),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(t){return w(this,void 0,void 0,function(){return b(this,function(e){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(e,n){var o=t.mediaStream.getVideoTracks().length,r=0;t.mediaStream.getVideoTracks().forEach(function(n){t.mediaStream.removeTrack(n),n.stop(),++r>=o&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),e())})})},t.prototype.getCapabilities=function(){return new x(this.getFirstTrackOrFail())},t}(),U=function(){function t(t){this.mediaStream=t}return t.prototype.render=function(t,e,n){return w(this,void 0,void 0,function(){return b(this,function(o){return[2,R.create(t,this.mediaStream,e,n)]})})},t.create=function(e){return w(this,void 0,void 0,function(){var n;return b(this,function(o){switch(o.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return[2,new t(o.sent())]}})})},t}(),j=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},k=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},F=function(){function t(){}return t.failIfNotSupported=function(){return j(this,void 0,void 0,function(){return k(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(t){return j(this,void 0,void 0,function(){return k(this,function(e){return[2,U.create(t)]})})},t}(),B=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},P=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=y.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=y.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if("https:"===location.protocol)return!0;var t=location.host.split(":")[0];return"127.0.0.1"===t||"localhost"===t},t.getCamerasFromMediaDevices=function(){var t,e,n,o;return t=this,e=void 0,n=void 0,o=function(){var t,e,n,o,r,i,a;return B(this,function(s){switch(s.label){case 0:return t=function(t){for(var e=t.getVideoTracks(),n=0;n<e.length;n++){var o=e[n];o.enabled=!1,o.stop(),t.removeTrack(o)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return e=s.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=0,n=s.sent(),o=[],i=n;r<i.length;r++)"videoinput"===(a=i[r]).kind&&o.push({id:a.deviceId,label:a.label});return t(e),[2,o]}})},new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,e){MediaStreamTrack.getSources(function(e){for(var n=[],o=0;o<e.length;o++){var r=e[o];"video"===r.kind&&n.push({id:r.id,label:r.label})}t(n)})})},t}();!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"}(s||(s={}));var z=function(){function t(){this.state=s.NOT_STARTED,this.onGoingTransactionNewState=s.UNKNOWN}return t.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},t.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===s.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=s.UNKNOWN,this.directTransition(t)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===s.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=s.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==s.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(t){switch(this.state){case s.UNKNOWN:throw"Transition from unknown is not allowed";case s.NOT_STARTED:this.failIfNewStateIs(t,[s.PAUSED]);case s.SCANNING:case s.PAUSED:}},t.prototype.failIfNewStateIs=function(t,e){for(var n=0;n<e.length;n++)if(t===e[n])throw"Cannot transition from ".concat(this.state," to ").concat(t)},t}(),H=function(){function t(t){this.stateManager=t}return t.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},t.prototype.directTransition=function(t){this.stateManager.directTransition(t)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===s.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==s.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===s.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===s.PAUSED},t}(),Y=function(){function t(){}return t.create=function(){return new H(new z)},t}(),Q=function(){var t=function(e,n){return(t=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw TypeError("Class extends value "+String(n)+" is not a constructor or null");function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),G=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Q(e,t),e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(l),q=function(){function t(t,e){this.logger=e,this.fps=G.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=!0===t.disableFlip,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=G.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?C.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!g(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),V=function(){function t(t,e){var n;if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1,"boolean"==typeof e?this.verbose=!0===e:e&&(n=e,this.verbose=!0===n.verbose,n.experimentalFeatures),this.logger=new f(this.verbose),this.qrcode=new N(this.getSupportedFormats(e),this.getUseBarCodeDetectorIfSupported(n),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Y.create()}return t.prototype.start=function(t,e,n,o){var r,i=this;if(!t)throw"cameraIdOrConfig is required";if(!n||"function"!=typeof n)throw"qrCodeSuccessCallback is required and should be a function.";r=o||(this.verbose?this.logger.log:function(){});var a=q.create(e,this.logger);this.clearElement();var c=!1;a.videoConstraints&&(a.isMediaStreamConstraintsValid()?c=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var u=c,l=document.getElementById(this.elementId);l.clientWidth?l.clientWidth:G.DEFAULT_WIDTH,l.style.position="relative",this.shouldScan=!0,this.element=l;var d=this,h=this.stateManagerProxy.startTransition(s.SCANNING);return new Promise(function(e,o){var s=u?a.videoConstraints:d.createVideoConstraints(t);if(!s){h.cancel(),o("videoConstraints should be defined");return}var c={};(!u||a.aspectRatio)&&(c.aspectRatio=a.aspectRatio);var l={onRenderSurfaceReady:function(t,e){d.setupUi(t,e,a),d.isScanning=!0,d.foreverScan(a,n,r)}};F.failIfNotSupported().then(function(t){t.create(s).then(function(t){return t.render(i.element,c,l).then(function(t){d.renderedCamera=t,h.execute(),e(null)}).catch(function(t){h.cancel(),o(t)})}).catch(function(t){h.cancel(),o(y.errorGettingUserMedia(t))})}).catch(function(t){h.cancel(),o(y.cameraStreamingNotSupported())})})},t.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(s.PAUSED),this.showPausedState(),(g(t)||!0!==t)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,e=function(){t.stateManagerProxy.directTransition(s.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){e();return}this.renderedCamera.resume(function(){e()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var e=this.stateManagerProxy.startTransition(s.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var n=function(){if(t.element){var e=document.getElementById(G.SHADED_REGION_ELEMENT_ID);e&&t.element.removeChild(e)}},o=this;return this.renderedCamera.close().then(function(){return o.renderedCamera=null,o.element&&(o.element.removeChild(o.canvasElement),o.canvasElement=null),n(),o.qrRegion&&(o.qrRegion=null),o.context&&(o.context=null),e.execute(),o.hidePausedState(),o.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(t,e){return this.scanFileV2(t,e).then(function(t){return t.decodedText})},t.prototype.scanFileV2=function(t,e){var n=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(g(e)&&(e=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(o,r){n.possiblyCloseLastScanImageFile(),n.clearElement(),n.lastScanImageFile=URL.createObjectURL(t);var i=new Image;i.onload=function(){var t=i.width,a=i.height,s=document.getElementById(n.elementId),c=s.clientWidth?s.clientWidth:G.DEFAULT_WIDTH,u=Math.max(s.clientHeight?s.clientHeight:a,G.FILE_SCAN_MIN_HEIGHT),l=n.computeCanvasDrawConfig(t,a,c,u);if(e){var d=n.createCanvasElement(c,u,"qr-canvas-visible");d.style.display="inline-block",s.appendChild(d);var p=d.getContext("2d");if(!p)throw"Unable to get 2d context from canvas";p.canvas.width=c,p.canvas.height=u,p.drawImage(i,0,0,t,a,l.x,l.y,l.width,l.height)}var f=G.FILE_SCAN_HIDDEN_CANVAS_PADDING,g=Math.max(i.width,l.width),y=Math.max(i.height,l.height),m=g+2*f,S=y+2*f,C=n.createCanvasElement(m,S);s.appendChild(C);var T=C.getContext("2d");if(!T)throw"Unable to get 2d context from canvas";T.canvas.width=m,T.canvas.height=S,T.drawImage(i,0,0,t,a,f,f,g,y);try{n.qrcode.decodeRobustlyAsync(C).then(function(t){o(h.createFromQrcodeResult(t))}).catch(r)}catch(t){r("QR code parse error, error = ".concat(t))}},i.onerror=r,i.onabort=r,i.onstalled=r,i.onsuspend=r,i.src=URL.createObjectURL(t)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return P.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(t){if(t){if(!C.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},t.prototype.getRenderedCameraOrFail=function(){if(null==this.renderedCamera)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(t){var e=[o.QR_CODE,o.AZTEC,o.CODABAR,o.CODE_39,o.CODE_93,o.CODE_128,o.DATA_MATRIX,o.MAXICODE,o.ITF,o.EAN_13,o.EAN_8,o.PDF_417,o.RSS_14,o.RSS_EXPANDED,o.UPC_A,o.UPC_E,o.UPC_EAN_EXTENSION];if(!t||"boolean"==typeof t||!t.formatsToSupport)return e;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(0===t.formatsToSupport.length)throw"Atleast 1 formatsToSupport is needed.";for(var n=[],r=0,i=t.formatsToSupport;r<i.length;r++){var a=i[r];Object.values(o).includes(a)?n.push(a):this.logger.warn("Invalid format: ".concat(a," passed in config, ignoring."))}if(0===n.length)throw"None of formatsToSupport match supported values.";return n},t.prototype.getUseBarCodeDetectorIfSupported=function(t){if(g(t))return!0;if(!g(t.useBarCodeDetectorIfSupported))return!1!==t.useBarCodeDetectorIfSupported;if(g(t.experimentalFeatures))return!0;var e=t.experimentalFeatures;return!!g(e.useBarCodeDetectorIfSupported)||!1!==e.useBarCodeDetectorIfSupported},t.prototype.validateQrboxSize=function(t,e,n){var o,r=n.qrbox;this.validateQrboxConfig(r);var i=this.toQrdimensions(t,e,r),a=function(t){if(t<G.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(G.MIN_QR_BOX_SIZE,"px.")};a(i.width),a(i.height),i.width=((o=i.width)>t&&(this.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),o=t),o)},t.prototype.validateQrboxConfig=function(t){if("number"!=typeof t&&"function"!=typeof t&&(void 0===t.width||void 0===t.height))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(t,e,n){if("number"==typeof n)return{width:n,height:n};if("function"==typeof n)try{return n(t,e)}catch(t){throw Error("qrbox config was passed as a function but it failed with unknown error"+t)}return n},t.prototype.setupUi=function(t,e,n){n.isShadedBoxEnabled()&&this.validateQrboxSize(t,e,n);var o=g(n.qrbox)?{width:t,height:e}:n.qrbox;this.validateQrboxConfig(o);var r=this.toQrdimensions(t,e,o);r.height>e&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var i=n.isShadedBoxEnabled()&&r.height<=e,a=i?this.getShadedRegionBounds(t,e,r):{x:0,y:0,width:t,height:e},s=this.createCanvasElement(a.width,a.height),c=s.getContext("2d",{willReadFrequently:!0});c.canvas.width=a.width,c.canvas.height=a.height,this.element.append(s),i&&this.possiblyInsertShadingElement(this.element,t,e,r),this.createScannerPausedUiElement(this.element),this.qrRegion=a,this.context=c,this.canvasElement=s},t.prototype.createScannerPausedUiElement=function(t){var e=document.createElement("div");e.innerText=y.scannerPaused(),e.style.display="none",e.style.position="absolute",e.style.top="0px",e.style.zIndex="1",e.style.background="rgba(9, 9, 9, 0.46)",e.style.color="#FFECEC",e.style.textAlign="center",e.style.width="100%",t.appendChild(e),this.scannerPausedUiElement=e},t.prototype.scanContext=function(t,e){var n=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(e){return t(e.text,h.createFromQrcodeResult(e)),n.possiblyUpdateShaders(!0),!0}).catch(function(t){n.possiblyUpdateShaders(!1);var o=y.codeParseError(t);return e(o,p.createFrom(o)),!1})},t.prototype.foreverScan=function(t,e,n){var o=this;if(this.shouldScan&&this.renderedCamera){var r=this.renderedCamera.getSurface(),i=r.videoWidth/r.clientWidth,a=r.videoHeight/r.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var s=this.qrRegion.width*i,c=this.qrRegion.height*a,u=this.qrRegion.x*i,l=this.qrRegion.y*a;this.context.drawImage(r,u,l,s,c,0,0,this.qrRegion.width,this.qrRegion.height);var d=function(){o.foreverScanTimeout=setTimeout(function(){o.foreverScan(t,e,n)},o.getTimeoutFps(t.fps))};this.scanContext(e,n).then(function(r){r||!0===t.disableFlip?d():(o.context.translate(o.context.canvas.width,0),o.context.scale(-1,1),o.scanContext(e,n).finally(function(){d()}))}).catch(function(t){o.logger.logError("Error happend while scanning context",t),d()})}},t.prototype.createVideoConstraints=function(t){if("string"==typeof t)return{deviceId:{exact:t}};if("object"==typeof t){var e="facingMode",n="deviceId",o={user:!0,environment:!0},r="exact",i=function(t){if(t in o)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(t,"'")},a=Object.keys(t);if(1!==a.length)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(a.length," keys");var s=Object.keys(t)[0];if(s!==e&&s!==n)throw"Only '".concat(e,"' and '").concat(n,"' ")+" are supported for 'cameraIdOrConfig'";if(s===e){var c=t.facingMode;if("string"==typeof c){if(i(c))return{facingMode:c}}else if("object"==typeof c){if(r in c){if(i(c["".concat(r)]))return{facingMode:{exact:c["".concat(r)]}}}else throw"'facingMode' should be string or object with"+" ".concat(r," as key.")}else{var u=typeof c;throw"Invalid type of 'facingMode' = ".concat(u)}}else{var l=t.deviceId;if("string"==typeof l)return{deviceId:l};if("object"==typeof l){if(r in l)return{deviceId:{exact:l["".concat(r)]}};throw"'deviceId' should be string or object with"+" ".concat(r," as key.")}var d=typeof l;throw"Invalid type of 'deviceId' = ".concat(d)}}var h=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(h)},t.prototype.computeCanvasDrawConfig=function(t,e,n,o){if(t<=n&&e<=o)return{x:(n-t)/2,y:(o-e)/2,width:t,height:e};var r=t,i=e;return t>n&&(e=n/t*e,t=n),e>o&&(t=o/e*t,e=o),this.logger.log("Image downsampled from "+"".concat(r,"X").concat(i)+" to ".concat(t,"X").concat(e,".")),this.computeCanvasDrawConfig(t,e,n,o)},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},t.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(e){e.style.backgroundColor=t?G.BORDER_SHADER_MATCH_COLOR:G.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(t,e,n){var o=document.createElement("canvas");return o.style.width="".concat(t,"px"),o.style.height="".concat(e,"px"),o.style.display="none",o.id=g(n)?"qr-canvas":n,o},t.prototype.getShadedRegionBounds=function(t,e,n){if(n.width>t||n.height>e)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-n.width)/2,y:(e-n.height)/2,width:n.width,height:n.height}},t.prototype.possiblyInsertShadingElement=function(t,e,n,o){if(!(e-o.width<1)&&!(n-o.height<1)){var r=document.createElement("div");r.style.position="absolute";var i=(e-o.width)/2,a=(n-o.height)/2;r.style.borderLeft="".concat(i,"px solid rgba(0, 0, 0, 0.48)"),r.style.borderRight="".concat(i,"px solid rgba(0, 0, 0, 0.48)"),r.style.borderTop="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),r.style.borderBottom="".concat(a,"px solid rgba(0, 0, 0, 0.48)"),r.style.boxSizing="border-box",r.style.top="0px",r.style.bottom="0px",r.style.left="0px",r.style.right="0px",r.id="".concat(G.SHADED_REGION_ELEMENT_ID),e-o.width<11||n-o.height<11?this.hasBorderShaders=!1:(this.insertShaderBorders(r,40,5,-5,null,0,!0),this.insertShaderBorders(r,40,5,-5,null,0,!1),this.insertShaderBorders(r,40,5,null,-5,0,!0),this.insertShaderBorders(r,40,5,null,-5,0,!1),this.insertShaderBorders(r,5,45,-5,null,-5,!0),this.insertShaderBorders(r,5,45,null,-5,-5,!0),this.insertShaderBorders(r,5,45,-5,null,-5,!1),this.insertShaderBorders(r,5,45,null,-5,-5,!1),this.hasBorderShaders=!0),t.append(r)}},t.prototype.insertShaderBorders=function(t,e,n,o,r,i,a){var s=document.createElement("div");s.style.position="absolute",s.style.backgroundColor=G.BORDER_SHADER_DEFAULT_COLOR,s.style.width="".concat(e,"px"),s.style.height="".concat(n,"px"),null!==o&&(s.style.top="".concat(o,"px")),null!==r&&(s.style.bottom="".concat(r,"px")),a?s.style.left="".concat(i,"px"):s.style.right="".concat(i,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(s),t.appendChild(s)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(t){return 1e3/t},t}(),W="data:image/svg+xml;base64,",X=W+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",K=W+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Z=W+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",$=function(){function t(){}return t.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},t}(),J=function(){function t(){this.data=$.createDefault();var e=localStorage.getItem(t.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return t.prototype.hasCameraPermissions=function(){return this.data.hasPermission},t.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},t.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},t.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},t.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},t.prototype.reset=function(){this.data=$.createDefault(),this.flush()},t.prototype.flush=function(){localStorage.setItem(t.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},t.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",t}(),tt=function(){function t(){this.infoDiv=document.createElement("div")}return t.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=S.poweredBy();var e=document.createElement("a");e.innerText="ScanApp",e.href="https://scanapp.org",e.target="new",e.style.color="white",this.infoDiv.appendChild(e);var n=document.createElement("br"),o=document.createElement("br");this.infoDiv.appendChild(n),this.infoDiv.appendChild(o);var r=document.createElement("a");r.innerText=S.reportIssues(),r.href="https://github.com/mebjas/html5-qrcode/issues",r.target="new",r.style.color="white",this.infoDiv.appendChild(r),t.appendChild(this.infoDiv)},t.prototype.show=function(){this.infoDiv.style.display="block"},t.prototype.hide=function(){this.infoDiv.style.display="none"},t}(),te=function(){function t(t,e){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=e,this.infoIcon=document.createElement("img")}return t.prototype.renderInto=function(t){var e=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Z,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(t){return e.onHoverIn()},this.infoIcon.onmouseout=function(t){return e.onHoverOut()},this.infoIcon.onclick=function(t){return e.onClick()},t.appendChild(this.infoIcon)},t.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},t.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},t.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Z,this.infoIcon.style.opacity="0.6")},t}(),tn=function(){function t(){var t=this;this.infoDiv=new tt,this.infoIcon=new te(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return t.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},t}(),to=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},tr=function(){function t(){}return t.hasPermissions=function(){var t,e,n,o;return t=this,e=void 0,n=void 0,o=function(){var t,e,n;return to(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=0,e=o.sent();t<e.length;t++)if("videoinput"===(n=e[t]).kind&&n.label)return[2,!0];return[2,!1]}})},new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},t}(),ti=function(){function t(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return t.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},t.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},t.prototype.isCameraScanRequired=function(){for(var e=0,n=this.supportedScanTypes;e<n.length;e++){var o=n[e];if(t.isCameraScanType(o))return!0}return!1},t.isCameraScanType=function(t){return t===i.SCAN_TYPE_CAMERA},t.isFileScanType=function(t){return t===i.SCAN_TYPE_FILE},t.prototype.validateAndReturnScanTypes=function(t){if(!t||0===t.length)return l.DEFAULT_SUPPORTED_SCAN_TYPE;var e=l.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>e)throw"Max ".concat(e," values expected for ")+"supportedScanTypes";for(var n=0;n<t.length;n++){var o=t[n];if(!l.DEFAULT_SUPPORTED_SCAN_TYPE.includes(o))throw"Unsupported scan type ".concat(o)}return t},t}(),ta=function(){function t(){}return t.ALL_ELEMENT_CLASS="html5-qrcode-element",t.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",t.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",t.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",t.TORCH_BUTTON_ID="html5-qrcode-button-torch",t.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",t.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",t.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",t.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",t.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",t.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",t}(),ts=function(){function t(){}return t.createElement=function(t,e){var n=document.createElement(t);return n.id=e,n.classList.add(ta.ALL_ELEMENT_CLASS),"button"===t&&n.setAttribute("type","button"),n},t}(),tc=function(t,e,n,o){return new(n||(n=Promise))(function(r,i){function a(t){try{c(o.next(t))}catch(t){i(t)}}function s(t){try{c(o.throw(t))}catch(t){i(t)}}function c(t){var e;t.done?r(t.value):((e=t.value)instanceof n?e:new n(function(t){t(e)})).then(a,s)}c((o=o.apply(t,e||[])).next())})},tu=function(t,e){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,o&&(r=2&s[0]?o.return:s[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,s[1])).done)return r;switch(o=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,o=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=e.call(t,a)}catch(t){s=[6,t],o=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},tl=function(){function t(t,e,n){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=e,this.onTorchActionFailureCallback=n}return t.prototype.isTorchEnabled=function(){return this.isTorchOn},t.prototype.flipState=function(){return tc(this,void 0,void 0,function(){var t,e;return tu(this,function(n){switch(n.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return n.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return e=n.sent(),this.propagateFailure(t,e),this.buttonController.enable(),[3,4];case 4:return[2]}})})},t.prototype.updateUiBasedOnLatestSettings=function(t,e){t===e?(this.buttonController.setText(e?m.torchOffButton():m.torchOnButton()),this.isTorchOn=e):this.propagateFailure(e),this.buttonController.enable()},t.prototype.propagateFailure=function(t,e){var n=t?m.torchOnFailedMessage():m.torchOffFailedMessage();e&&(n+="; Error = "+e),this.onTorchActionFailureCallback(n)},t.prototype.reset=function(){this.isTorchOn=!1},t}(),td=function(){function t(t,e){this.onTorchActionFailureCallback=e,this.torchButton=ts.createElement("button",ta.TORCH_BUTTON_ID),this.torchController=new tl(t,this,e)}return t.prototype.render=function(t,e){var n=this;this.torchButton.innerText=m.torchOnButton(),this.torchButton.style.display=e.display,this.torchButton.style.marginLeft=e.marginLeft;var o=this;this.torchButton.addEventListener("click",function(t){return tc(n,void 0,void 0,function(){return tu(this,function(t){switch(t.label){case 0:return[4,o.torchController.flipState()];case 1:return t.sent(),o.torchController.isTorchEnabled()?(o.torchButton.classList.remove(ta.TORCH_BUTTON_CLASS_TORCH_OFF),o.torchButton.classList.add(ta.TORCH_BUTTON_CLASS_TORCH_ON)):(o.torchButton.classList.remove(ta.TORCH_BUTTON_CLASS_TORCH_ON),o.torchButton.classList.add(ta.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},t.prototype.updateTorchCapability=function(t){this.torchController=new tl(t,this,this.onTorchActionFailureCallback)},t.prototype.getTorchButton=function(){return this.torchButton},t.prototype.hide=function(){this.torchButton.style.display="none"},t.prototype.show=function(){this.torchButton.style.display="inline-block"},t.prototype.disable=function(){this.torchButton.disabled=!0},t.prototype.enable=function(){this.torchButton.disabled=!1},t.prototype.setText=function(t){this.torchButton.innerText=t},t.prototype.reset=function(){this.torchButton.innerText=m.torchOnButton(),this.torchController.reset()},t.create=function(e,n,o,r){var i=new t(n,r);return i.render(e,o),i},t}(),th=function(){function t(t,e,n){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=e?"block":"none",t.appendChild(this.fileBasedScanRegion);var o=document.createElement("label");o.setAttribute("for",this.getFileScanInputId()),o.style.display="inline-block",this.fileBasedScanRegion.appendChild(o),this.fileSelectionButton=ts.createElement("button",ta.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(t){o.click()}),o.append(this.fileSelectionButton),this.fileScanInput=ts.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",o.appendChild(this.fileScanInput);var r=this;this.fileScanInput.addEventListener("change",function(t){if(null!=t&&null!=t.target){var e=t.target;if(!e.files||0!==e.files.length){var o=e.files[0],i=o.name;r.setImageNameToButton(i),n(o)}}});var i=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(i),this.fileBasedScanRegion.addEventListener("dragenter",function(t){r.fileBasedScanRegion.style.border=r.fileBasedScanRegionActiveBorder(),t.stopPropagation(),t.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(t){r.fileBasedScanRegion.style.border=r.fileBasedScanRegionDefaultBorder(),t.stopPropagation(),t.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(t){r.fileBasedScanRegion.style.border=r.fileBasedScanRegionActiveBorder(),t.stopPropagation(),t.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(t){t.stopPropagation(),t.preventDefault(),r.fileBasedScanRegion.style.border=r.fileBasedScanRegionDefaultBorder();var e=t.dataTransfer;if(e){var o=e.files;if(!o||0===o.length)return;for(var a=!1,s=0;s<o.length;++s){var c=o.item(s);if(c){var u=/image.*/;if(c.type.match(u)){a=!0;var l=c.name;r.setImageNameToButton(l),n(c),i.innerText=m.dragAndDropMessage();break}}}a||(i.innerText=m.dragAndDropMessageOnlyImages())}})}return t.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},t.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},t.prototype.isShowing=function(){return"block"===this.fileBasedScanRegion.style.display},t.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},t.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},t.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},t.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},t.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=m.dragAndDropMessage(),t.style.fontWeight="400",t},t.prototype.setImageNameToButton=function(t){if(t.length>20){var e=t.substring(0,8),n=t.length,o=t.substring(n-8,n);t="".concat(e,"....").concat(o)}var r=m.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=r},t.prototype.setInitialValueToButton=function(){var t=m.fileSelectionChooseImage()+" - "+m.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},t.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},t.create=function(e,n,o){return new t(e,n,o)},t}(),tp=function(){function t(t){this.selectElement=ts.createElement("select",ta.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return t.prototype.render=function(t){var e=document.createElement("span");e.style.marginRight="10px";var n=this.cameras.length;if(0===n)throw Error("No cameras found");if(1===n)e.style.display="none";else{var o=m.selectCamera();e.innerText="".concat(o," (").concat(this.cameras.length,")  ")}for(var r=1,i=0,a=this.cameras;i<a.length;i++){var s=a[i],c=s.id,u=null==s.label?c:s.label;u&&""!==u||(u=[m.anonymousCameraPrefix(),r++].join(" "));var l=document.createElement("option");l.value=c,l.innerText=u,this.options.push(l),this.selectElement.appendChild(l)}e.appendChild(this.selectElement),t.appendChild(e)},t.prototype.disable=function(){this.selectElement.disabled=!0},t.prototype.isDisabled=function(){return!0===this.selectElement.disabled},t.prototype.enable=function(){this.selectElement.disabled=!1},t.prototype.getValue=function(){return this.selectElement.value},t.prototype.hasValue=function(t){for(var e=0,n=this.options;e<n.length;e++)if(n[e].value===t)return!0;return!1},t.prototype.setValue=function(t){if(!this.hasValue(t))throw Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},t.prototype.hasSingleItem=function(){return 1===this.cameras.length},t.prototype.numCameras=function(){return this.cameras.length},t.create=function(e,n){var o=new t(n);return o.render(e),o},t}(),tf=function(){function t(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=ts.createElement("input",ta.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return t.prototype.render=function(t,e){this.zoomElementContainer.style.display=e?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var n=m.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(n),this.rangeText.style.marginRight="10px";var o=this;this.rangeInput.addEventListener("input",function(){return o.onValueChange()}),this.rangeInput.addEventListener("change",function(){return o.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},t.prototype.onValueChange=function(){var t=m.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},t.prototype.setValues=function(t,e,n,o){this.rangeInput.min=t.toString(),this.rangeInput.max=e.toString(),this.rangeInput.step=o.toString(),this.rangeInput.value=n.toString(),this.onValueChange()},t.prototype.show=function(){this.zoomElementContainer.style.display="block"},t.prototype.hide=function(){this.zoomElementContainer.style.display="none"},t.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},t.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},t.create=function(e,n){var o=new t;return o.render(e,n),o},t}();!function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"}(c||(c={}));var tg=function(){function t(t,e,n){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(e),this.verbose=!0===n,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.scanTypeSelector=new ti(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new f(this.verbose),this.persistedDataManager=new J,!0!==e.rememberLastUsedCamera&&this.persistedDataManager.reset()}return t.prototype.render=function(t,e){var n,o,r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(e,n){if(t)t(e,n);else{if(r.lastMatchFound===e)return;r.lastMatchFound=e,r.setHeaderMessage(m.lastMatch(e),c.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(t,n){e&&e(t,n)};var i=document.getElementById(this.elementId);if(!i)throw"HTML Element with id=".concat(this.elementId," not found");i.innerHTML="",this.createBasicLayout(i),this.html5Qrcode=new V(this.getScanRegionId(),(n=this.config,o=this.verbose,{formatsToSupport:n.formatsToSupport,useBarCodeDetectorIfSupported:n.useBarCodeDetectorIfSupported,experimentalFeatures:n.experimentalFeatures,verbose:o}))},t.prototype.pause=function(t){(g(t)||!0!==t)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},t.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},t.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},t.prototype.clear=function(){var t=this,e=function(){var e=document.getElementById(t.elementId);e&&(e.innerHTML="",t.resetBasicLayout(e))};return this.html5Qrcode?new Promise(function(n,o){if(!t.html5Qrcode){n();return}t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(o){if(!t.html5Qrcode){n();return}t.html5Qrcode.clear(),e(),n()}).catch(function(e){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",e),o(e)}):(t.html5Qrcode.clear(),e(),n())}):Promise.resolve()},t.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},t.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},t.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},t.prototype.createConfig=function(t){return t?(t.fps||(t.fps=l.SCAN_DEFAULT_FPS),!l.DEFAULT_REMEMBER_LAST_CAMERA_USED!==t.rememberLastUsedCamera&&(t.rememberLastUsedCamera=l.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=l.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:l.SCAN_DEFAULT_FPS,rememberLastUsedCamera:l.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:l.DEFAULT_SUPPORTED_SCAN_TYPE}},t.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var e=document.createElement("div"),n=this.getScanRegionId();e.id=n,e.style.width="100%",e.style.minHeight="100px",e.style.textAlign="center",t.appendChild(e),ti.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var o=document.createElement("div"),r=this.getDashboardId();o.id=r,o.style.width="100%",t.appendChild(o),this.setupInitialDashboard(o)},t.prototype.resetBasicLayout=function(t){t.style.border="none"},t.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},t.prototype.createHeader=function(t){var e=document.createElement("div");e.style.textAlign="left",e.style.margin="0px",t.appendChild(e),new tn().renderInto(e);var n=document.createElement("div");n.id=this.getHeaderMessageContainerId(),n.style.display="none",n.style.textAlign="center",n.style.fontSize="14px",n.style.padding="2px 10px",n.style.margin="4px",n.style.borderTop="1px solid #f6f6f6",e.appendChild(n)},t.prototype.createSection=function(t){var e=document.createElement("div");e.id=this.getDashboardSectionId(),e.style.width="100%",e.style.padding="10px 0px 10px 0px",e.style.textAlign="left",t.appendChild(e)},t.prototype.createCameraListUi=function(t,e,n){var o=this;o.showHideScanTypeSwapLink(!1),o.setHeaderMessage(m.cameraPermissionRequesting());var r=function(){n||o.createPermissionButton(t,e)};V.getCameras().then(function(n){o.persistedDataManager.setHasPermission(!0),o.showHideScanTypeSwapLink(!0),o.resetHeaderMessage(),n&&n.length>0?(t.removeChild(e),o.renderCameraSelection(n)):(o.setHeaderMessage(m.noCameraFound(),c.STATUS_WARNING),r())}).catch(function(t){o.persistedDataManager.setHasPermission(!1),n?n.disabled=!1:r(),o.setHeaderMessage(t,c.STATUS_WARNING),o.showHideScanTypeSwapLink(!0)})},t.prototype.createPermissionButton=function(t,e){var n=this,o=ts.createElement("button",this.getCameraPermissionButtonId());o.innerText=m.cameraPermissionTitle(),o.addEventListener("click",function(){o.disabled=!0,n.createCameraListUi(t,e,o)}),e.appendChild(o)},t.prototype.createPermissionsUi=function(t,e){var n=this;if(ti.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){tr.hasPermissions().then(function(o){o?n.createCameraListUi(t,e):(n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(t,e))}).catch(function(o){n.persistedDataManager.setHasPermission(!1),n.createPermissionButton(t,e)});return}this.createPermissionButton(t,e)},t.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),e=document.createElement("div");t.appendChild(e);var n=document.createElement("div");n.id=this.getDashboardSectionCameraScanRegionId(),n.style.display=ti.isCameraScanType(this.currentScanType)?"block":"none",e.appendChild(n);var o=document.createElement("div");o.style.textAlign="center",n.appendChild(o),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(n,o),this.renderFileScanUi(e)},t.prototype.renderFileScanUi=function(t){var e=ti.isFileScanType(this.currentScanType),n=this;this.fileSelectionUi=th.create(t,e,function(t){if(!n.html5Qrcode)throw"html5Qrcode not defined";ti.isFileScanType(n.currentScanType)&&(n.setHeaderMessage(m.loadingImage()),n.html5Qrcode.scanFileV2(t,!0).then(function(t){n.resetHeaderMessage(),n.qrCodeSuccessCallback(t.decodedText,t)}).catch(function(t){n.setHeaderMessage(t,c.STATUS_WARNING),n.qrCodeErrorCallback(t,p.createFrom(t))}))})},t.prototype.renderCameraSelection=function(t){var e,n=this,o=this,r=document.getElementById(this.getDashboardSectionCameraScanRegionId());r.style.textAlign="center";var i=tf.create(r,!1),a=function(t){var e,o,r,a=t.zoomFeature();if(a.isSupported()){i.setOnCameraZoomValueChangeCallback(function(t){a.apply(t)});var s=1;n.config.defaultZoomValueIfSupported&&(s=n.config.defaultZoomValueIfSupported),e=s,o=a.min(),s=e>(r=a.max())?r:e<o?o:e,i.setValues(a.min(),a.max(),s,a.step()),i.show()}},s=tp.create(r,t),u=document.createElement("span"),l=ts.createElement("button",ta.CAMERA_START_BUTTON_ID);l.innerText=m.scanButtonStartScanningText(),u.appendChild(l);var d=ts.createElement("button",ta.CAMERA_STOP_BUTTON_ID);d.innerText=m.scanButtonStopScanningText(),d.style.display="none",d.disabled=!0,u.appendChild(d);var h=function(t){if(!t.torchFeature().isSupported()){e&&e.hide();return}e?e.updateTorchCapability(t.torchFeature()):e=td.create(u,t.torchFeature(),{display:"none",marginLeft:"5px"},function(t){o.setHeaderMessage(t,c.STATUS_WARNING)}),e.show()};r.appendChild(u);var p=function(t){t||(l.style.display="none"),l.innerText=m.scanButtonStartScanningText(),l.style.opacity="1",l.disabled=!1,t&&(l.style.display="inline-block")};if(l.addEventListener("click",function(t){l.innerText=m.scanButtonScanningStarting(),s.disable(),l.disabled=!0,l.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&o.showHideScanTypeSwapLink(!1),o.resetHeaderMessage();var e,r=s.getValue();o.persistedDataManager.setLastUsedCameraId(r),o.html5Qrcode.start(r,{fps:(e=o.config).fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints},o.qrCodeSuccessCallback,o.qrCodeErrorCallback).then(function(t){d.disabled=!1,d.style.display="inline-block",p(!1);var e=o.html5Qrcode.getRunningTrackCameraCapabilities();!0===n.config.showTorchButtonIfSupported&&h(e),!0===n.config.showZoomSliderIfSupported&&a(e)}).catch(function(t){o.showHideScanTypeSwapLink(!0),s.enable(),p(!0),o.setHeaderMessage(t,c.STATUS_WARNING)})}),s.hasSingleItem()&&l.click(),d.addEventListener("click",function(t){if(!o.html5Qrcode)throw"html5Qrcode not defined";d.disabled=!0,o.html5Qrcode.stop().then(function(t){n.scanTypeSelector.hasMoreThanOneScanType()&&o.showHideScanTypeSwapLink(!0),s.enable(),l.disabled=!1,d.style.display="none",l.style.display="inline-block",e&&(e.reset(),e.hide()),i.removeOnCameraZoomValueChangeCallback(),i.hide(),o.insertCameraScanImageToScanRegion()}).catch(function(t){d.disabled=!1,o.setHeaderMessage(t,c.STATUS_WARNING)})}),o.persistedDataManager.getLastUsedCameraId()){var f=o.persistedDataManager.getLastUsedCameraId();s.hasValue(f)?(s.setValue(f),l.click()):o.persistedDataManager.resetLastUsedCameraId()}},t.prototype.createSectionSwap=function(){var t=this,e=m.textIfCameraScanSelected(),n=m.textIfFileScanSelected(),o=document.getElementById(this.getDashboardSectionId()),r=document.createElement("div");r.style.textAlign="center";var a=ts.createElement("span",this.getDashboardSectionSwapLinkId());a.style.textDecoration="underline",a.style.cursor="pointer",a.innerText=ti.isCameraScanType(this.currentScanType)?e:n,a.addEventListener("click",function(){if(!t.sectionSwapAllowed){t.verbose&&t.logger.logError("Section swap called when not allowed");return}t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,ti.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),a.innerText=n,t.currentScanType=i.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),a.innerText=e,t.currentScanType=i.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0}),r.appendChild(a),o.appendChild(r)},t.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,e=this;if(this.persistedDataManager.hasCameraPermissions()){tr.hasPermissions().then(function(n){if(n){var o=document.getElementById(e.getCameraPermissionButtonId());if(!o)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";o.click()}else e.persistedDataManager.setHasPermission(!1)}).catch(function(t){e.persistedDataManager.setHasPermission(!1)});return}},t.prototype.resetHeaderMessage=function(){document.getElementById(this.getHeaderMessageContainerId()).style.display="none"},t.prototype.setHeaderMessage=function(t,e){e||(e=c.STATUS_DEFAULT);var n=this.getHeaderMessageDiv();switch(n.innerText=t,n.style.display="block",e){case c.STATUS_SUCCESS:n.style.background="rgba(106, 175, 80, 0.26)",n.style.color="#477735";break;case c.STATUS_WARNING:n.style.background="rgba(203, 36, 49, 0.14)",n.style.color="#cb2431";break;case c.STATUS_DEFAULT:default:n.style.background="rgba(0, 0, 0, 0)",n.style.color="rgb(17, 17, 17)"}},t.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(!0!==t&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},t.prototype.insertCameraScanImageToScanRegion=function(){var t=this,e=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){e.innerHTML="<br>",e.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(n){e.innerHTML="<br>",e.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=X,this.cameraScanImage.alt=m.cameraScanAltText()},t.prototype.insertFileScanImageToScanRegion=function(){var t=this,e=document.getElementById(this.getScanRegionId());if(this.fileScanImage){e.innerHTML="<br>",e.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(n){e.innerHTML="<br>",e.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=K,this.fileScanImage.alt=m.fileScanAltText()},t.prototype.clearScanRegion=function(){document.getElementById(this.getScanRegionId()).innerHTML=""},t.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},t.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},t.prototype.getDashboardSectionSwapLinkId=function(){return ta.SCAN_TYPE_CHANGE_ANCHOR_ID},t.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},t.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},t.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},t.prototype.getCameraPermissionButtonId=function(){return ta.CAMERA_PERMISSION_BUTTON_ID},t.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},t.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},t.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},t}()},3394:(t,e,n)=>{n.d(e,{A:()=>d});var o=n(2115);let r=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter((t,e,n)=>!!t&&""!==t.trim()&&n.indexOf(t)===e).join(" ").trim()},i=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),a=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,e,n)=>n?n.toUpperCase():e.toLowerCase()),s=t=>{let e=a(t);return e.charAt(0).toUpperCase()+e.slice(1)};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let u=t=>{for(let e in t)if(e.startsWith("aria-")||"role"===e||"title"===e)return!0;return!1},l=(0,o.forwardRef)((t,e)=>{let{color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:s,className:l="",children:d,iconNode:h,...p}=t;return(0,o.createElement)("svg",{ref:e,...c,width:i,height:i,stroke:n,strokeWidth:s?24*Number(a)/Number(i):a,className:r("lucide",l),...!d&&!u(p)&&{"aria-hidden":"true"},...p},[...h.map(t=>{let[e,n]=t;return(0,o.createElement)(e,n)}),...Array.isArray(d)?d:[d]])}),d=(t,e)=>{let n=(0,o.forwardRef)((n,a)=>{let{className:c,...u}=n;return(0,o.createElement)(l,{ref:a,iconNode:e,className:r("lucide-".concat(i(s(t))),"lucide-".concat(t),c),...u})});return n.displayName=s(t),n}},2423:(t,e,n)=>{n.d(e,{A:()=>o});let o=(0,n(3394).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},1190:(t,e,n)=>{n.d(e,{A:()=>o});let o=(0,n(3394).A)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},8907:(t,e,n)=>{n.d(e,{A:()=>o});let o=(0,n(3394).A)("chart-bar",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 16h8",key:"srdodz"}],["path",{d:"M7 11h12",key:"127s9w"}],["path",{d:"M7 6h3",key:"w9rmul"}]])},8867:(t,e,n)=>{n.d(e,{A:()=>o});let o=(0,n(3394).A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},3518:(t,e,n)=>{n.d(e,{A:()=>o});let o=(0,n(3394).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},6967:(t,e,n)=>{n.d(e,{A:()=>o});let o=(0,n(3394).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},4505:(t,e,n)=>{n.d(e,{A:()=>o});let o=(0,n(3394).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},5236:(t,e,n)=>{n.d(e,{A:()=>o});let o=(0,n(3394).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},6527:(t,e,n)=>{n.d(e,{A:()=>o});let o=(0,n(3394).A)("minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},3580:(t,e,n)=>{n.d(e,{A:()=>o});let o=(0,n(3394).A)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]])},872:(t,e,n)=>{n.d(e,{A:()=>o});let o=(0,n(3394).A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]])},3473:(t,e,n)=>{n.d(e,{A:()=>o});let o=(0,n(3394).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},1697:(t,e,n)=>{n.d(e,{A:()=>o});let o=(0,n(3394).A)("scan-barcode",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["path",{d:"M8 7v10",key:"23sfjj"}],["path",{d:"M12 7v10",key:"jspqdw"}],["path",{d:"M17 7v10",key:"578dap"}]])},5686:(t,e,n)=>{n.d(e,{A:()=>o});let o=(0,n(3394).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},1466:(t,e,n)=>{n.d(e,{A:()=>o});let o=(0,n(3394).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},767:(t,e,n)=>{n.d(e,{A:()=>o});let o=(0,n(3394).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6046:(t,e,n)=>{var o=n(6658);n.o(o,"useRouter")&&n.d(e,{useRouter:function(){return o.useRouter}})},4624:(t,e,n)=>{var o,r,i,a,s,c,u,l,d,h,p,f;n.d(e,{ij:()=>X}),function(t){t.STRING="string",t.NUMBER="number",t.INTEGER="integer",t.BOOLEAN="boolean",t.ARRAY="array",t.OBJECT="object"}(o||(o={})),function(t){t.LANGUAGE_UNSPECIFIED="language_unspecified",t.PYTHON="python"}(r||(r={})),function(t){t.OUTCOME_UNSPECIFIED="outcome_unspecified",t.OUTCOME_OK="outcome_ok",t.OUTCOME_FAILED="outcome_failed",t.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"}(i||(i={}));let g=["user","model","function","system"];!function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"}(a||(a={})),function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"}(s||(s={})),function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"}(c||(c={})),function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER"}(u||(u={})),function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.OTHER="OTHER"}(l||(l={})),function(t){t.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",t.RETRIEVAL_QUERY="RETRIEVAL_QUERY",t.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",t.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",t.CLASSIFICATION="CLASSIFICATION",t.CLUSTERING="CLUSTERING"}(d||(d={})),function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE"}(h||(h={})),function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"}(p||(p={}));class y extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class m extends y{constructor(t,e){super(t),this.response=e}}class S extends y{constructor(t,e,n,o){super(t),this.status=e,this.statusText=n,this.errorDetails=o}}class C extends y{}class T extends y{}!function(t){t.GENERATE_CONTENT="generateContent",t.STREAM_GENERATE_CONTENT="streamGenerateContent",t.COUNT_TOKENS="countTokens",t.EMBED_CONTENT="embedContent",t.BATCH_EMBED_CONTENTS="batchEmbedContents"}(f||(f={}));class E{constructor(t,e,n,o,r){this.model=t,this.task=e,this.apiKey=n,this.stream=o,this.requestOptions=r}toString(){var t,e;let n=(null===(t=this.requestOptions)||void 0===t?void 0:t.apiVersion)||"v1beta",o=(null===(e=this.requestOptions)||void 0===e?void 0:e.baseUrl)||"https://generativelanguage.googleapis.com",r=`${o}/${n}/${this.model}:${this.task}`;return this.stream&&(r+="?alt=sse"),r}}async function M(t){var e;let n=new Headers;n.append("Content-Type","application/json"),n.append("x-goog-api-client",function(t){let e=[];return(null==t?void 0:t.apiClient)&&e.push(t.apiClient),e.push("genai-js/0.24.1"),e.join(" ")}(t.requestOptions)),n.append("x-goog-api-key",t.apiKey);let o=null===(e=t.requestOptions)||void 0===e?void 0:e.customHeaders;if(o){if(!(o instanceof Headers))try{o=new Headers(o)}catch(t){throw new C(`unable to convert customHeaders value ${JSON.stringify(o)} to Headers: ${t.message}`)}for(let[t,e]of o.entries()){if("x-goog-api-key"===t)throw new C(`Cannot set reserved header name ${t}`);if("x-goog-api-client"===t)throw new C(`Header name ${t} can only be set using the apiClient field`);n.append(t,e)}}return n}async function A(t,e,n,o,r,i){let a=new E(t,e,n,o,i);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},function(t){let e={};if((null==t?void 0:t.signal)!==void 0||(null==t?void 0:t.timeout)>=0){let n=new AbortController;(null==t?void 0:t.timeout)>=0&&setTimeout(()=>n.abort(),t.timeout),(null==t?void 0:t.signal)&&t.signal.addEventListener("abort",()=>{n.abort()}),e.signal=n.signal}return e}(i)),{method:"POST",headers:await M(a),body:r})}}async function I(t,e,n,o,r,i={},a=fetch){let{url:s,fetchOptions:c}=await A(t,e,n,o,r,i);return v(s,c,a)}async function v(t,e,n=fetch){let o;try{o=await n(t,e)}catch(e){!function(t,e){let n=t;throw"AbortError"===n.name?(n=new T(`Request aborted when fetching ${e.toString()}: ${t.message}`)).stack=t.stack:t instanceof S||t instanceof C||((n=new y(`Error fetching from ${e.toString()}: ${t.message}`)).stack=t.stack),n}(e,t)}return o.ok||await N(o,t),o}async function N(t,e){let n,o="";try{let e=await t.json();o=e.error.message,e.error.details&&(o+=` ${JSON.stringify(e.error.details)}`,n=e.error.details)}catch(t){}throw new S(`Error fetching from ${e.toString()}: [${t.status} ${t.statusText}] ${o}`,t.status,t.statusText,n)}function D(t){return t.text=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),O(t.candidates[0]))throw new m(`${_(t)}`,t);return function(t){var e,n,o,r;let i=[];if(null===(n=null===(e=t.candidates)||void 0===e?void 0:e[0].content)||void 0===n?void 0:n.parts)for(let e of null===(r=null===(o=t.candidates)||void 0===o?void 0:o[0].content)||void 0===r?void 0:r.parts)e.text&&i.push(e.text),e.executableCode&&i.push("\n```"+e.executableCode.language+"\n"+e.executableCode.code+"\n```\n"),e.codeExecutionResult&&i.push("\n```\n"+e.codeExecutionResult.output+"\n```\n");return i.length>0?i.join(""):""}(t)}if(t.promptFeedback)throw new m(`Text not available. ${_(t)}`,t);return""},t.functionCall=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),O(t.candidates[0]))throw new m(`${_(t)}`,t);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),w(t)[0]}if(t.promptFeedback)throw new m(`Function call not available. ${_(t)}`,t)},t.functionCalls=()=>{if(t.candidates&&t.candidates.length>0){if(t.candidates.length>1&&console.warn(`This response had ${t.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),O(t.candidates[0]))throw new m(`${_(t)}`,t);return w(t)}if(t.promptFeedback)throw new m(`Function call not available. ${_(t)}`,t)},t}function w(t){var e,n,o,r;let i=[];if(null===(n=null===(e=t.candidates)||void 0===e?void 0:e[0].content)||void 0===n?void 0:n.parts)for(let e of null===(r=null===(o=t.candidates)||void 0===o?void 0:o[0].content)||void 0===r?void 0:r.parts)e.functionCall&&i.push(e.functionCall);return i.length>0?i:void 0}let b=[l.RECITATION,l.SAFETY,l.LANGUAGE];function O(t){return!!t.finishReason&&b.includes(t.finishReason)}function _(t){var e,n,o;let r="";if((!t.candidates||0===t.candidates.length)&&t.promptFeedback)r+="Response was blocked",(null===(e=t.promptFeedback)||void 0===e?void 0:e.blockReason)&&(r+=` due to ${t.promptFeedback.blockReason}`),(null===(n=t.promptFeedback)||void 0===n?void 0:n.blockReasonMessage)&&(r+=`: ${t.promptFeedback.blockReasonMessage}`);else if(null===(o=t.candidates)||void 0===o?void 0:o[0]){let e=t.candidates[0];O(e)&&(r+=`Candidate was blocked due to ${e.finishReason}`,e.finishMessage&&(r+=`: ${e.finishMessage}`))}return r}function L(t){return this instanceof L?(this.v=t,this):new L(t)}"function"==typeof SuppressedError&&SuppressedError;let x=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;async function R(t){let e=[],n=t.getReader();for(;;){let{done:t,value:o}=await n.read();if(t)return D(function(t){let e=t[t.length-1],n={promptFeedback:null==e?void 0:e.promptFeedback};for(let e of t){if(e.candidates){let t=0;for(let o of e.candidates)if(n.candidates||(n.candidates=[]),n.candidates[t]||(n.candidates[t]={index:t}),n.candidates[t].citationMetadata=o.citationMetadata,n.candidates[t].groundingMetadata=o.groundingMetadata,n.candidates[t].finishReason=o.finishReason,n.candidates[t].finishMessage=o.finishMessage,n.candidates[t].safetyRatings=o.safetyRatings,o.content&&o.content.parts){n.candidates[t].content||(n.candidates[t].content={role:o.content.role||"user",parts:[]});let e={};for(let r of o.content.parts)r.text&&(e.text=r.text),r.functionCall&&(e.functionCall=r.functionCall),r.executableCode&&(e.executableCode=r.executableCode),r.codeExecutionResult&&(e.codeExecutionResult=r.codeExecutionResult),0===Object.keys(e).length&&(e.text=""),n.candidates[t].content.parts.push(e)}t++}e.usageMetadata&&(n.usageMetadata=e.usageMetadata)}return n}(e));e.push(o)}}async function U(t,e,n,o){return function(t){let[e,n]=(function(t){let e=t.getReader();return new ReadableStream({start(t){let n="";return function o(){return e.read().then(({value:e,done:r})=>{let i;if(r){if(n.trim()){t.error(new y("Failed to parse stream"));return}t.close();return}let a=(n+=e).match(x);for(;a;){try{i=JSON.parse(a[1])}catch(e){t.error(new y(`Error parsing JSON response: "${a[1]}"`));return}t.enqueue(i),a=(n=n.substring(a[0].length)).match(x)}return o()}).catch(t=>{let e=t;throw e.stack=t.stack,e="AbortError"===e.name?new T("Request aborted when reading from the stream"):new y("Error reading from the stream")})}()}})})(t.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0}))).tee();return{stream:function(t){return function(t,e,n){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var o,r=n.apply(t,e||[]),i=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(t){r[t]&&(o[t]=function(e){return new Promise(function(n,o){i.push([t,e,n,o])>1||s(t,e)})})}function s(t,e){try{var n;(n=r[t](e)).value instanceof L?Promise.resolve(n.value.v).then(c,u):l(i[0][2],n)}catch(t){l(i[0][3],t)}}function c(t){s("next",t)}function u(t){s("throw",t)}function l(t,e){t(e),i.shift(),i.length&&s(i[0][0],i[0][1])}}(this,arguments,function*(){let e=t.getReader();for(;;){let{value:t,done:n}=yield L(e.read());if(n)break;yield yield L(D(t))}})}(e),response:R(n)}}(await I(e,f.STREAM_GENERATE_CONTENT,t,!0,JSON.stringify(n),o))}async function j(t,e,n,o){let r=await I(e,f.GENERATE_CONTENT,t,!1,JSON.stringify(n),o);return{response:D(await r.json())}}function k(t){if(null!=t){if("string"==typeof t)return{role:"system",parts:[{text:t}]};if(t.text)return{role:"system",parts:[t]};if(t.parts)return t.role?t:{role:"system",parts:t.parts}}}function F(t){let e=[];if("string"==typeof t)e=[{text:t}];else for(let n of t)"string"==typeof n?e.push({text:n}):e.push(n);return function(t){let e={role:"user",parts:[]},n={role:"function",parts:[]},o=!1,r=!1;for(let i of t)"functionResponse"in i?(n.parts.push(i),r=!0):(e.parts.push(i),o=!0);if(o&&r)throw new y("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!o&&!r)throw new y("No content is provided for sending chat message.");return o?e:n}(e)}function B(t){let e;return e=t.contents?t:{contents:[F(t)]},t.systemInstruction&&(e.systemInstruction=k(t.systemInstruction)),e}let P=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],z={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function H(t){var e;if(void 0===t.candidates||0===t.candidates.length)return!1;let n=null===(e=t.candidates[0])||void 0===e?void 0:e.content;if(void 0===n||void 0===n.parts||0===n.parts.length)return!1;for(let t of n.parts)if(void 0===t||0===Object.keys(t).length||void 0!==t.text&&""===t.text)return!1;return!0}let Y="SILENT_ERROR";class Q{constructor(t,e,n,o={}){this.model=e,this.params=n,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,(null==n?void 0:n.history)&&(function(t){let e=!1;for(let n of t){let{role:t,parts:o}=n;if(!e&&"user"!==t)throw new y(`First content should be with role 'user', got ${t}`);if(!g.includes(t))throw new y(`Each item should include role field. Got ${t} but valid roles are: ${JSON.stringify(g)}`);if(!Array.isArray(o))throw new y("Content should have 'parts' property with an array of Parts");if(0===o.length)throw new y("Each Content should have at least one part");let r={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(let t of o)for(let e of P)e in t&&(r[e]+=1);let i=z[t];for(let e of P)if(!i.includes(e)&&r[e]>0)throw new y(`Content with role '${t}' can't contain '${e}' part`);e=!0}}(n.history),this._history=n.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,e={}){var n,o,r,i,a,s;let c;await this._sendPromise;let u=F(t),l={safetySettings:null===(n=this.params)||void 0===n?void 0:n.safetySettings,generationConfig:null===(o=this.params)||void 0===o?void 0:o.generationConfig,tools:null===(r=this.params)||void 0===r?void 0:r.tools,toolConfig:null===(i=this.params)||void 0===i?void 0:i.toolConfig,systemInstruction:null===(a=this.params)||void 0===a?void 0:a.systemInstruction,cachedContent:null===(s=this.params)||void 0===s?void 0:s.cachedContent,contents:[...this._history,u]},d=Object.assign(Object.assign({},this._requestOptions),e);return this._sendPromise=this._sendPromise.then(()=>j(this._apiKey,this.model,l,d)).then(t=>{var e;if(H(t.response)){this._history.push(u);let n=Object.assign({parts:[],role:"model"},null===(e=t.response.candidates)||void 0===e?void 0:e[0].content);this._history.push(n)}else{let e=_(t.response);e&&console.warn(`sendMessage() was unsuccessful. ${e}. Inspect response object for details.`)}c=t}).catch(t=>{throw this._sendPromise=Promise.resolve(),t}),await this._sendPromise,c}async sendMessageStream(t,e={}){var n,o,r,i,a,s;await this._sendPromise;let c=F(t),u={safetySettings:null===(n=this.params)||void 0===n?void 0:n.safetySettings,generationConfig:null===(o=this.params)||void 0===o?void 0:o.generationConfig,tools:null===(r=this.params)||void 0===r?void 0:r.tools,toolConfig:null===(i=this.params)||void 0===i?void 0:i.toolConfig,systemInstruction:null===(a=this.params)||void 0===a?void 0:a.systemInstruction,cachedContent:null===(s=this.params)||void 0===s?void 0:s.cachedContent,contents:[...this._history,c]},l=Object.assign(Object.assign({},this._requestOptions),e),d=U(this._apiKey,this.model,u,l);return this._sendPromise=this._sendPromise.then(()=>d).catch(t=>{throw Error(Y)}).then(t=>t.response).then(t=>{if(H(t)){this._history.push(c);let e=Object.assign({},t.candidates[0].content);e.role||(e.role="model"),this._history.push(e)}else{let e=_(t);e&&console.warn(`sendMessageStream() was unsuccessful. ${e}. Inspect response object for details.`)}}).catch(t=>{t.message!==Y&&console.error(t)}),d}}async function G(t,e,n,o){return(await I(e,f.COUNT_TOKENS,t,!1,JSON.stringify(n),o)).json()}async function q(t,e,n,o){return(await I(e,f.EMBED_CONTENT,t,!1,JSON.stringify(n),o)).json()}async function V(t,e,n,o){let r=n.requests.map(t=>Object.assign(Object.assign({},t),{model:e}));return(await I(e,f.BATCH_EMBED_CONTENTS,t,!1,JSON.stringify({requests:r}),o)).json()}class W{constructor(t,e,n={}){this.apiKey=t,this._requestOptions=n,e.model.includes("/")?this.model=e.model:this.model=`models/${e.model}`,this.generationConfig=e.generationConfig||{},this.safetySettings=e.safetySettings||[],this.tools=e.tools,this.toolConfig=e.toolConfig,this.systemInstruction=k(e.systemInstruction),this.cachedContent=e.cachedContent}async generateContent(t,e={}){var n;let o=B(t),r=Object.assign(Object.assign({},this._requestOptions),e);return j(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(n=this.cachedContent)||void 0===n?void 0:n.name},o),r)}async generateContentStream(t,e={}){var n;let o=B(t),r=Object.assign(Object.assign({},this._requestOptions),e);return U(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(n=this.cachedContent)||void 0===n?void 0:n.name},o),r)}startChat(t){var e;return new Q(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:null===(e=this.cachedContent)||void 0===e?void 0:e.name},t),this._requestOptions)}async countTokens(t,e={}){let n=function(t,e){var n;let o={model:null==e?void 0:e.model,generationConfig:null==e?void 0:e.generationConfig,safetySettings:null==e?void 0:e.safetySettings,tools:null==e?void 0:e.tools,toolConfig:null==e?void 0:e.toolConfig,systemInstruction:null==e?void 0:e.systemInstruction,cachedContent:null===(n=null==e?void 0:e.cachedContent)||void 0===n?void 0:n.name,contents:[]},r=null!=t.generateContentRequest;if(t.contents){if(r)throw new C("CountTokensRequest must have one of contents or generateContentRequest, not both.");o.contents=t.contents}else if(r)o=Object.assign(Object.assign({},o),t.generateContentRequest);else{let e=F(t);o.contents=[e]}return{generateContentRequest:o}}(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),e);return G(this.apiKey,this.model,n,o)}async embedContent(t,e={}){let n="string"==typeof t||Array.isArray(t)?{content:F(t)}:t,o=Object.assign(Object.assign({},this._requestOptions),e);return q(this.apiKey,this.model,n,o)}async batchEmbedContents(t,e={}){let n=Object.assign(Object.assign({},this._requestOptions),e);return V(this.apiKey,this.model,t,n)}}class X{constructor(t){this.apiKey=t}getGenerativeModel(t,e){if(!t.model)throw new y("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new W(this.apiKey,t,e)}getGenerativeModelFromCachedContent(t,e,n){if(!t.name)throw new C("Cached content must contain a `name` field.");if(!t.model)throw new C("Cached content must contain a `model` field.");for(let n of["model","systemInstruction"])if((null==e?void 0:e[n])&&t[n]&&(null==e?void 0:e[n])!==t[n]){if("model"===n&&(e.model.startsWith("models/")?e.model.replace("models/",""):e.model)===(t.model.startsWith("models/")?t.model.replace("models/",""):t.model))continue;throw new C(`Different value for "${n}" specified in modelParams (${e[n]}) and cachedContent (${t[n]})`)}let o=Object.assign(Object.assign({},e),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new W(this.apiKey,o,n)}}}}]);